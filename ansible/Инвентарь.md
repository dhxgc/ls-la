# Инвентари с хостами, Ansible

### Указываются в формате `yml` или `ini` (ниже ini):
```ini
[host-11]
192.168.122.11

[host-12]
192.168.122.12
```

---

### Можно задавать без группы:
##### Вариант 1:
```ini
192.168.122.11
192.168.122.12
```

##### Можно задавать типа "alias":
> Суть в том, что сам адрес будет задаваться в переменной
```ini
host-11 ansible_host=192.168.122.11
host-12 ansible_host=192.168.122.12
```

---

### Можно создавать родительскую группу:
```ini
[host-11]
192.168.122.11

[host-12]
192.168.122.12

[allhosts:children]
host-11
host-12
```

---

### Можно задавать переменные:
```ini
[host-11]
192.168.122.11

# Переменные только для одного хоста в группе
[host-12]
192.168.122.12 ansible_ssh_user=admin ansible_ssh_pass=P@ssw0rd

# Переменные для группы
[host-11:vars]
ansible_ssh_user=admin
ansible_ssh_pass=P@ssw0rd
```
> Чтобы подключаться по паролю, а не по ключам, нужно сделать `apt-get install sshpass` на управляющем сервере. Как указывать креды - выше

---

### Использование переменных в плейбуках:
##### Инвентарь:
```ini
[host-12]
192.168.122.12 debug_message="debug_message"
```

##### Плейбук:
```yml
- name: Display var from inventory
  hosts: host-12
  tasks:
    - debug:
      msg: "{{ debug_message }}"
```

---

### Команды, связанные с инвентарем:
1. Вывести всю информацию по инвентарю:
```bash
ansible-inventory --list
```

2. Вывести только структуру групп:
```bash
ansible-inventory --graph
```
> Здесь реализован `proxy-nginx`, который проксирует на httpd.
> Также реализована переадресация https -> http, путем этого самого прокси.

Замечания:
- `name: proxy-and-app` - задает имя проекта. Итого все контейнеры будут иметь имя <имя_проекта-имя_контейнера>.

Сам проект состоит из двух контейнеров, nginx в качестве proxy и apache (httpd образ). 

__Сети__:
- Создается сеть app-net, это сеть по умолчанию. То есть все контейнеры из compose подключаются к ней, если не указано иное.

__Порты__:
- Порт проброшен только у nginx'a, 443 - чтобы общаться с миром по https.

__Тома__:
- К nginx'у подключены два тома (bind mount):
```yaml
    volumes:
      - ./nginx/selfsigned/:/etc/ssl/selfsigned:ro
      - ./nginx/proxy.conf:/etc/nginx/conf.d/proxy.conf:ro
```

1. Пробрасывает самоподписанные сертификаты, чтобы потом прикрутить их в конфиге
2. Пробрасывает саму конфигу в директорию `/etc/nginx/conf.d/`. 

> `conf.d` - что-то типа sites-available у apache, но без применений и прочего. 
> Просто рестарт контейнера (сервера или самого nginx'a) - все запускается, главное чтобы конфиги не конфликтовали.

Сама конфига в этом случае описывается достаточно просто (формат yaml):
```yaml
server { # Открываем блок, в котором будет описывать "типа виртуальный хост".  
    listen      443 ssl; # Указываем порт, ssl видимо говорит, что будет протокол ssl...
    server_name 10.6.1.224; # Указываем имя сервера. Если есть доменное имя - указываем его. Иначе - IP.
    
    ssl_certificate        /etc/ssl/selfsigned/nginx-selfsigned.crt; # Сам сертификат
    ssl_certificate_key    /etc/ssl/selfsigned/nginx-selfsigned.key; # И приватный ключ

    proxy_ssl_protocols           TLSv1 TLSv1.1 TLSv1.2; # Какие параметры, их миллион, без них все работает прекрасно (наверное)
    proxy_ssl_ciphers             HIGH:!aNULL:!MD5;

    location / { # Блок location говорит о том, что будет происходить при переходе на определенный путь. 
    # То есть вбили https://IP/govno - то выполнится то, что указано в блоке location /govno.
        proxy_pass http://httpd1/; # Указание, куда переадресовывать (В корень сайта на сервере httpd1)
    }
    # Итого - имеется обратный прокси, который умеет переадресовывать на контейнер с именем httpd1.
}
```

Серты генерировались одной командой:
```bash
openssl req \ 
    -x509 -nodes \ 
    -days 365 \ 
    -newkey rsa:2048 \ 
    -keyout /etc/ssl/private/nginx-selfsigned.key \ 
    -out /etc/ssl/certs/nginx-selfsigned.crt
```




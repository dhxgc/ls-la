# Восстановление загрузчика винды

Дано:

Стояла Windows 11. После был поставлен Альт. После установки:
 - пропадает раздел загрузчика;
 - `os-prober` не может обнаружить другую ОСь (так как записи то в EFI нет, епта);
 - если ставить в обратном порядке - все ок.

Решение:

> Источник: [Here](https://winitpro.ru/index.php/2015/06/04/vosstanovlenie-struktury-udalennyx-efi-razdelov-v-windows-7/)

Кратко все выглядит так:
 - снести MSR (16MB, которые там висят, как правило `partition 1`);
 - сжать основной раздел на 128МБ;
 - создать efi-раздел на 128МБ, создать msr-раздел на 16МБ;
 - скопировать данные с основного раздела на новый раздел загрузчика (оно там как-то само находит, че именно, как и куда надо закинуть).

# `os-prober` не обнаруживает другие ОС

Дано:

 - Windows 11 и два EOS, все загружаются, имеют свои записи в UEFI.
 - `os-prober` обнаруживает Windows 11, но не второй Linux (в обе стороны)

Решение (не самое элегантное):
 - Зашел на последнюю систему, смонтировал корневой раздел (в `btrfs` сам диск, не `@` том) первой системы
 - Открыл `<some-path>/boot/grub/grub.cfg`
 - В нем нашел три записи: основная загрузочная, и сабменю с двумя записями внутри
 - Скопировал их и вставил в `/etc/grub.d/40_custom`

